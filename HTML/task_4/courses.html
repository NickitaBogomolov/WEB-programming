<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Курсы валют</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <div class="logo">Бизнес-портал</div>
        <div class="greeting">Добро пожаловать, бизнесмен</div>
    </header>
    <nav>
        <ul>
            <li><a href="index.html">Меню</a></li>
            <li><a href="about.html">О нас</a></li>
            <li><a href="gallery.html">Галерея</a></li>
            <li><a href="ideas.html">Бизнес идеи</a></li>
            <li><a href="courses.html">Курсы валют</a></li>
        </ul>
    </nav>
    <main>
        <section>
            <h2>Курсы валют</h2>
            <div id="currency-date"></div>
            <table id="currency-table" border="1" class="currency-table">
                <thead>
                    <tr>
                        <th>Валюта</th>
                        <th>Курс, ₽</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">Загрузка данных...</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>
    <footer>
        <p>Авторство: Богомолов Никита</p>
    </footer>
</body>

</html>

<script>
    // Функция для форматирования даты
    function formatDate(date) {
        return date.toLocaleString('ru', {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric'
        });
    }

    // Получение курсов валют
    async function getCurrencyRates() {
        try {
            const response = await fetch('https://www.cbr-xml-daily.ru/daily_json.js');
            const data = await response.json();

            // Обновление даты
            document.getElementById('currency-date').textContent =
                `Обновлено: ${formatDate(new Date(data.Date))}`;

            // Очистка таблицы
            const tableBody = document.querySelector('#currency-table tbody');
            tableBody.innerHTML = '';

            // Добавление основных валют
            const currencies = ['USD', 'EUR', 'CNY', 'GBP', 'JPY'];

            currencies.forEach(currency => {
                if (data.Valute[currency]) {
                    const row = document.createElement('tr');

                    const nameCell = document.createElement('td');
                    nameCell.textContent = `${currency} (${data.Valute[currency].Name})`;

                    const rateCell = document.createElement('td');
                    rateCell.textContent = data.Valute[currency].Value.toFixed(2);

                    row.appendChild(nameCell);
                    row.appendChild(rateCell);
                    tableBody.appendChild(row);
                }
            });
        } catch (error) {
            document.querySelector('#currency-table tbody').innerHTML = `
                <tr><td colspan="2">Ошибка загрузки данных</td></tr>
            `;
            console.error('Ошибка получения курсов валют:', error);
        }
    }

    window.addEventListener('load', getCurrencyRates);
</script>